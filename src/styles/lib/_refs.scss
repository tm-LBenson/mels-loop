@use "sass:string";
@import "../config";

@function prefix($prefix) {
	$path: #{$theme-namespace-prefix}#{if(
			string.length($prefix) > 0,
			-#{$prefix},
			""
		)};
	@return $path;
}

@function cssVar($var) {
	@return #{"--"}#{$var};
}

@function cssRef($key, $prefix: "") {
	@return cssVar(#{$prefix}-#{$key});
}

@function varName($key, $prefix: "") {
	@return cssRef($key, prefix($prefix));
}

@function varNameState($key, $state: "", $prefix: "") {
	@return cssRef(#{$key}#{$state}, prefix($prefix));
}

@function ref($key, $prefix: "") {
	@return #{var(cssRef($key, prefix($prefix)))};
}

@function globalRef($key) {
	@return ref($key, $theme-global-prefix);
}

@function compRef(
	$ns: $__namespace__,
	$key,
	$state: "",
	$prefix: $theme-namespace-prefix
) {
	$compState: "";

	@if (str-length($state) > 0) {
		$compState: $state;
	}

	@return #{var(
			cssRef(#{$key}#{$compState}, #{$prefix}-#{$ns}),
			var(cssVar(#{$key}#{$compState}))
		)};
}

@mixin useThemeVar(
	$cssProperty,
	$themeProperty,
	$varName: "__generic__",
	$varState: ""
) {
	#{$cssProperty}: compRef($varName, $themeProperty, $varState);
}
