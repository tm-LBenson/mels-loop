$color2: #f2efe4;
$color6: #666560;

$factor0: 5%;

@function contrastText($color) {
	$result: invert($color);
	$lightness: lightness($result);
	@if ($lightness < 50) {
		$result: $color6;
	} @else {
		$result: $color2;
	}
	@return $result;
}

@function createColorMap($color, $percentage) {
	$map: (
		main: $color,
		light: lighten($color, $percentage),
		dark: darken($color, $percentage),
		contrast: contrastText($color),
	);
	@return $map;
}

@mixin Theme(
	$theme: (
		colors: (
			surface,
			primary,
			secondary,
			link,
			error,
			success,
		),
	)
) {
	$colors-map: ();
	$gradients: map-get($theme, gradients);
	$pallette: (
		surface: map-get(map-get($theme, colors), surface),
		primary: map-get(map-get($theme, colors), primary),
		secondary: map-get(map-get($theme, colors), secondary),
		link: map-get(map-get($theme, colors), link),
		error: map-get(map-get($theme, colors), error),
		success: map-get(map-get($theme, colors), success),
	);
	@each $key, $value in $pallette {
		$map: ();
		$map: map-merge(
			$map,
			(
				$key: createColorMap($value, $factor0),
			)
		);
		$colors-map: map-merge($colors-map, $map);
	}

	background-color: map-get(map-get($colors-map, surface), main);

	@include ThemeColors($colors-map, $gradients);
}

@mixin ThemeColors(
	$colors: (
		surface,
		primary,
		secondary,
		link,
		error,
		success,
	),
	$gradients: (
		gradient1: (
			start,
			middle,
			end,
		),
	)
) {
	[data-link-type],
	a {
		color: map-get(map-get($colors, link), main);
		&:link,
		&:visited {
			color: map-get(map-get($colors, link), main);
		}
		&:hover {
			color: map-get(map-get($colors, link), dark);
		}
		&:active {
			color: map-get(map-get($colors, link), light);
		}
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6,
	ul,
	ol,
	table,
	blockquote,
	p,
	pre {
		color: map-get(map-get($colors, surface), contrast);
	}

	pre {
		background-color: map-get(map-get($colors, surface), dark);
	}

	footer {
		background-color: map-get(map-get($colors, surface), dark);
	}

	.strip {
		background: linear-gradient(
			90deg,
			map-get(map-get($gradients, gradient1), start) 0%,
			map-get(map-get($gradients, gradient1), middle) 50%,
			map-get(map-get($gradients, gradient1), end) 100%
		);
	}

	// // COMPONENTS
	// .code pre {
	// 	background: colors.$surface-light;
	// 	padding: 1rem;
	// }

	// p {
	// 	color: colors.$surface-contrast;
	// }

	// blockquote {
	// 	color: colors.$surface-contrast;
	// }
}
