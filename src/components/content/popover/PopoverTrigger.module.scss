/*
This is an agnostic CSS var map, contains only vars in states.

We use this map to define CSS vars in different states, while the property mappings of these vars are defined
in a mixin (see: `PopoverMixin.PopoverTrigger`), which be included in the trigger element's classname.
This allowes us, for instance, to achieve different highlighting, regardless any imeplentation detail.

the fallback format allows us to fallback to component's default style (--part-prop__state),
and override it from the theme.
*/

@import "styles/baseComponentStyle";
@import "styles/lib/states";
@import "styles/lib/themeVars";
@import "styles/lib/states";
@import "styles/lib/merge";

$states: deep(
	$COMPONENT_STATES,
	(
		selected: open,
		selected-hovered: (
			(open, hover),
		),
		selected-clicked: (
			(open, active),
		),
	)
);

@function getAstriekColor($state) {
	@return compRef(popover-trigger-astriek, color, state($state));
}

@function getTriggerTextColor($state) {
	@return compRef(popover-trigger, text-color, state($state));
}

@function getTriggerBackgroundColor($state) {
	@return compRef(popover-trigger, background-color, state($state));
}

$textVar: varName(popover-trigger-text-color);
$bgVar: varName(popover-trigger-background-color);

.root {
	--background-color: none;
	--background-color__hover: none;
	--background-color__active: #c0c0c0;
	--background-color__open: #e0e0e0;
	--background-color__open__hover: #e0e0e0;
	--background-color__open__active: #e0e0e0;
	--text-color: #000;
	--text-color__hover: inherit;
	--text-color__active: inherit;
	--text-color__open: inherit;
	--text-color__open__hover: inherit;
	--text-color__open__active: inherit;

	&:after {
		#{$textVar}: compRef(popover-trigger, astriek-color);
	}

	:hover {
		#{$bgVar}: compRef(popover-trigger, background-color, state(hovered));
		#{$textVar}: compRef(popover-trigger, text-color, state(hovered));

		&:after {
			#{$textVar}: compRef(popover-trigger, astriek-color, state(hovered));
		}
	}

	// custom Popover state `open`
	&[data-state="open"] {
		:after {
			#{$textVar}: #{getAstriekColor(selected)};
		}

		// #{triggerTextColorVar}: compRef(
		// 	popover-trigger-astriek,
		// 	color,
		// 	state(selected)
		// );

		#{$bgVar}: #{getTriggerBackgroundColor(selected)};
		#{$textVar}: compRef(popover-trigger, text-color, state(selected));

		:hover {
			#{$bgVar}: getTriggerBackgroundColor(selected-hovered);
			#{$textVar}: getTriggerTextColor(selected-hovered);
		}
	}
}
